# 🚀 AWS画像処理ハンズオン完全ガイド
## 2025年東北ITイベント

**初心者向け・2時間・実用的なサーバーレス画像処理システム構築**

---

## 📋 プロジェクト概要

### 🎯 目標
参加者が**明日から本番で使える**画像処理システムを2時間で構築し、以下を習得する：
- S3による画像ストレージ管理
- Lambda関数での自動画像処理
- DynamoDBでのメタデータ管理  
- CloudFrontによる高速配信
- 実運用のベストプラクティス

### 🏗️ 構築するシステム
```
📸 画像アップロード → 🪣 S3保存 → ⚡ Lambda処理 → 🖼️ サムネイル生成
                                        ↓
🌐 CloudFront配信 ← 🪣 S3保存 ← 📊 DynamoDB記録
```

### 👥 対象者・規模
- **対象**: AWS初心者（20-30名）
- **所要時間**: 2時間
- **開催地**: 東北・盛岡
- **命名**: 宮沢賢治・東北ゆかりの名前使用

---

## 📁 資料構成

### 🛠️ **1. 主催者用（事前準備）**

#### 1-1. CloudFormation自動環境構築
```yaml
# handson-environment.yaml
# 機能：
# - 参加者数に応じたIAMユーザー自動作成（10-35名対応）
# - 宮沢賢治・東北ゆかり命名（giovanni, campanella, sansa, iwatesan等）
# - Secrets Managerでの認証情報安全管理
# - サンプル画像・資料バケット作成
# - 必要な権限ポリシー自動設定

Parameters:
  ParticipantCount: 20-35名（直前変更対応）
  HandsonPrefix: "2025-tohoku-it"

Resources:
  - IAMユーザー×参加者数
  - 参加者用権限ポリシー
  - サンプル画像バケット
  - 資料バケット
  - ユーザー作成Lambda関数
```

#### 1-2. 事前準備スクリプト群
```bash
# setup-master-script.sh - メイン実行スクリプト
./setup-master-script.sh 25  # 25名で環境構築

# 自動実行される内容：
# 1. CloudFormationデプロイ（IAMユーザー作成）
# 2. サンプル画像生成・S3アップロード 
# 3. Lambda パッケージ作成・配布
# 4. 参加者資料自動生成

# 個別実行スクリプト：
# - setup-cloudformation.sh     # CF環境構築
# - setup-sample-images.sh      # 画像準備
# - setup-lambda-package.sh     # Lambda zip作成
# - generate-participant-materials.sh  # 資料生成
```

#### 1-3. Lambda関数実装（Python + Pillow）
```python
# lambda_function.py
# 機能：
# - S3 PUTイベント自動実行
# - 3サイズサムネイル生成（150px, 300px, 600px）
# - 無限ループ対策（thumbnails/フォルダ除外）
# - DynamoDBメタデータ自動保存
# - CloudFront対応（キャッシュヘッダー設定）
# - エラーハンドリング・ログ出力

主要関数：
- lambda_handler()          # メイン処理
- process_image()           # 画像処理
- create_thumbnail()        # サムネイル作成
- upload_to_s3()           # S3アップロード
- save_metadata_to_dynamodb()  # DB保存
```

### 👥 **2. 参加者用（当日手順）**

#### 2-1. 詳細手順書（メイン資料）
```markdown
# handson-guide.md
# 内容：AWSコンソールでの手動操作詳細手順

Step 1: 自分用S3バケット作成（10分）
 - AWSコンソールログイン手順
 - バケット作成・設定詳細
 - サンプル画像ダウンロード

Step 2: DynamoDBテーブル作成（10分）
 - テーブル設計・パーティションキー設定
 - オンデマンド課金設定

Step 3: IAMロール作成（15分）
 - Lambda実行ロール作成
 - S3・DynamoDB権限設定
 - カスタムポリシー作成手順

Step 4: Lambda関数作成（20分）
 - 関数作成・デプロイパッケージ使用
 - 環境変数・タイムアウト設定
 - S3トリガー設定

Step 5: CloudFront設定（25分）
 - Distribution作成・OAC設定
 - バケットポリシー更新

Step 6-8: テスト・トラブルシューティング（40分）
```

#### 2-2. Quick Startガイド
```markdown
# quickstart.md
# 内容：要点を絞った簡易版手順

🏃‍♂️ 5分でスタート
⚡ 重要なコマンド一覧
📋 チェックリスト
🔗 便利なリンク集
🆘 困ったときの対処法
```

#### 2-3. 個別認証情報
```
# individual-credentials/giovanni.txt
# 内容：参加者ごとの認証情報

===========================================
AWS ハンズオン認証情報
参加者番号: 1
ユーザー名: 2025-tohoku-it-giovanni
名前の意味: ジョバンニ（銀河鉄道の夜）

【AWS認証情報】
Access Key ID: AKIA...
Secret Access Key: ...
リージョン: ap-northeast-1
===========================================
```

### 🎓 **3. 講師用（当日進行）**

#### 3-1. 講師用詳細マニュアル
```markdown
# detailed-handson-manual.md
# 内容：120分の詳細進行表

⏰ タイムテーブル（10分単位）
📚 各Phaseの学習ポイント
🔧 技術説明のポイント
🚨 トラブルシューティング
📞 よくある質問と回答
📋 チェックリスト
```

#### 3-2. 技術解説ポイント
- AWS認証の仕組み
- サーバーレスアーキテクチャの利点
- IAMロールとポリシーの概念
- イベント駆動処理
- CDNの役割と効果
- 本番運用のベストプラクティス

### 📎 **4. Appendix（上級者向け）**

#### 4-1. WebP変換機能追加
```markdown
# webp-conversion-appendix.md
# 内容：差分形式でのコード拡張手順

🎯 目標: ファイルサイズ30-50%削減
⏰ 所要時間: 15分
🔧 6つの修正箇所（差分表示）
📊 ファイルサイズ比較結果
```

**追加される機能：**
- WebPサムネイル自動生成
- フルサイズWebP変換
- ブラウザ互換性対応
- DynamoDBメタデータ拡張

---

## 🚀 実行手順

### **Phase 1: 事前準備（主催者・1週間前）**

```bash
# 1. リポジトリ準備
git clone [ハンズオン資料リポジトリ]
cd aws-handson-2025-tohoku

# 2. 参加者数確定後、環境構築実行
chmod +x setup-master-script.sh
./setup-master-script.sh 25  # 25名の場合

# 実行内容（自動）：
# ✅ CloudFormation stack作成
# ✅ 25名分IAMユーザー作成
# ✅ サンプル画像8種類生成・アップロード
# ✅ Lambda zipパッケージ作成・S3保存
# ✅ 参加者認証情報CSV・個別ファイル生成
# ✅ 手順書・資料一式生成

# 3. 生成された資料確認
ls handson-setup/output/participant-materials/
# participant-credentials.csv
# individual-credentials/
# handson-guide.md
# quickstart.md
# dynamodb-table.yaml
```

### **Phase 2: 当日準備（主催者・開始30分前）**

```bash
# 1. 環境動作確認
aws cloudformation describe-stacks --stack-name 2025-tohoku-it-env
aws s3 ls s3://2025-tohoku-it-sample-images/samples/
aws lambda get-function --function-name test

# 2. 参加者資料配布準備
# - individual-credentials/ を印刷・配布
# - プロジェクター用 handson-guide.md 準備
# - サポートスタッフへ簡単説明

# 3. 緊急時対応準備
# - トラブルシューティング手順確認
# - 代替認証情報準備
```

### **Phase 3: ハンズオン実行（120分）**

#### タイムテーブル
| 時間 | 内容 | 参加者作業 | 講師サポート |
|------|------|------------|--------------|
| 00-10分 | オープニング | 認証情報受取・ログイン | 概要説明・質疑対応 |
| 10-40分 | 基礎設定 | S3バケット・DynamoDB・IAM | 概念説明・個別サポート |
| 40-85分 | Lambda画像処理 | 関数作成・トリガー設定・テスト | 技術解説・デバッグ支援 |
| 85-110分 | CloudFront設定 | CDN配信・動作確認 | 本番運用ポイント解説 |
| 110-120分 | 総合テスト・振り返り | 複数画像テスト・Appendix | 学習リソース紹介 |

#### 🎯 各段階の成功指標
- **Step 1**: 全員がS3バケット作成完了
- **Step 2**: DynamoDBテーブルがアクティブ状態
- **Step 3**: IAMロールに必要な権限が付与
- **Step 4**: Lambda関数で画像処理実行・ログ確認
- **Step 5**: CloudFrontで画像配信確認
- **最終**: `landscape_1.jpg` → 3つのサムネイル自動生成

### **Phase 4: 事後処理（主催者・当日終了後）**

```bash
# 1. リソース削除
aws cloudformation delete-stack --stack-name 2025-tohoku-it-env

# 2. 参加者向け情報提供
# - 個人アカウントでの再現手順
# - 学習リソース一覧
# - コミュニティ情報

# 3. フィードバック収集・改善案検討
```

---

## 📊 技術仕様

### **アーキテクチャ詳細**
```
[Browser] → [CloudFront] → [S3 Bucket] ← [Lambda Function] ← [S3 Trigger]
                                              ↓
                                         [DynamoDB Table]
```

### **使用するAWSサービス**
| サービス | 用途 | 設定ポイント |
|----------|------|--------------|
| **S3** | 画像ストレージ・配信 | バケットポリシー・CORS設定 |
| **Lambda** | 画像処理実行 | Python3.9・512MB・5分タイムアウト |
| **DynamoDB** | メタデータ管理 | オンデマンド課金・GSI設定 |
| **CloudFront** | CDN配信 | OAC・キャッシュ設定 |
| **IAM** | 権限管理 | 最小権限原則・ロールベース |
| **CloudWatch** | ログ・監視 | Lambda実行ログ・エラー監視 |

### **セキュリティ考慮点**
- IAM最小権限の原則
- S3バケットパブリックアクセス制限
- CloudFront OAC使用
- Secrets Managerでの認証情報管理
- VPC内配置（本番運用時）

### **スケーラビリティ**
- Lambda同時実行数制限設定
- DynamoDBオンデマンド課金
- CloudFrontエッジキャッシュ
- S3クロスリージョンレプリケーション対応

---

## 💡 特徴・強み

### ✅ **初心者向け配慮**
- **事前準備の自動化**: 複雑な初期設定はスクリプトで自動化
- **詳細な手順書**: スクリーンショット付きコンソール操作手順
- **親しみやすい命名**: 宮沢賢治・東北ゆかりの名前でハンズオン参加者のモチベーション向上
- **段階的学習**: 基礎→応用→実践の順序で理解を深化

### ✅ **実用性重視**
- **本番レベルの実装**: 単なる学習用でなく実際の業務で使用可能
- **ベストプラクティス**: 無限ループ対策・エラーハンドリング・監視設定
- **スケーラブル設計**: 本番運用を想定したアーキテクチャ
- **コスト最適化**: オンデマンド課金・適切なリソース設定

### ✅ **運営効率化**
- **参加者数柔軟対応**: 10-35名まで直前変更可能
- **自動資料生成**: 認証情報・手順書・チェックリストを自動作成
- **トラブル対応**: 詳細なデバッグ手順・よくある問題の解決策
- **品質保証**: 事前テスト済み・再現性確保

### ✅ **拡張性**
- **Appendix機能**: WebP変換など上級者向け機能追加
- **カスタマイズ可能**: 他地域・他テーマでの応用可能
- **モジュール設計**: 各コンポーネントの独立性・再利用性

---

## 🎯 学習効果

### **技術スキル習得**
- **AWSサービス理解**: S3・Lambda・DynamoDB・CloudFrontの実践的使用法
- **サーバーレス開発**: イベント駆動・関数型プログラミングの体験
- **インフラ管理**: IAM・セキュリティ・監視の基礎知識
- **画像処理**: Python・Pillowライブラリの活用

### **実務スキル向上**
- **システム設計**: 要件から実装まで一貫した開発体験
- **デバッグ手法**: ログ確認・エラー解析・問題解決プロセス
- **運用観点**: セキュリティ・スケーラビリティ・コスト最適化の考慮
- **チーム開発**: バージョン管理・ドキュメント作成・コミュニケーション

### **キャリア発展**
- **クラウドエンジニア**: AWS基礎スキルの証明・実績作成
- **フルスタック開発**: フロントエンド・バックエンド・インフラの統合理解
- **DevOps実践**: CI/CD・Infrastructure as Code の導入基礎
- **技術リーダーシップ**: 技術選定・アーキテクチャ設計の経験

---

## 📚 追加学習リソース

### **AWS公式**
- [AWS Well-Architected Framework](https://aws.amazon.com/architecture/well-architected/)
- [AWS Lambda開発者ガイド](https://docs.aws.amazon.com/lambda/)
- [Amazon S3ユーザーガイド](https://docs.aws.amazon.com/s3/)
- [AWS Hands-on Tutorials](https://aws.amazon.com/getting-started/hands-on/)

### **認定試験**
- **AWS Certified Cloud Practitioner** (入門レベル)
- **AWS Certified Solutions Architect - Associate** (アーキテクト基礎)
- **AWS Certified Developer - Associate** (開発者向け)

### **実践プロジェクト**
- **画像SNSアプリ**: 今回のシステムをベースにフロントエンド追加
- **動画処理システム**: MediaConvertを使用した動画変換システム
- **機械学習パイプライン**: SageMakerを使用した画像分類システム

### **コミュニティ**
- **JAWS-UG (Japan AWS User Group)**: 各地域での勉強会・イベント
- **AWS公式勉強会**: AWS主催のオンライン・オフラインイベント
- **技術ブログ・Qiita**: 実践的な記事投稿・情報収集

---

## 📞 サポート・連絡先

### **当日サポート**
- **講師**: [講師名・連絡先]
- **技術サポート**: [サポートスタッフ連絡先]
- **会場サポート**: [会場スタッフ連絡先]
- **緊急時**: [緊急連絡先]

### **事後フォロアップ**
- **質問対応**: [メールアドレス・Slackチャンネル]
- **コミュニティ参加**: [地域AWS勉強会情報]
- **個別相談**: [キャリア相談・技術相談の窓口]

### **フィードバック**
- **ハンズオン改善**: [フィードバックフォーム]
- **今後の要望**: [企画提案フォーム]
- **講師評価**: [講師フィードバック]

---

## 🎉 まとめ

この**AWS画像処理ハンズオン**は、初心者が2時間で実用的なサーバーレス画像処理システムを構築し、**明日から本番で使える**技術を習得することを目標としています。

**宮沢賢治・東北ゆかりの命名**で親しみやすさを演出しながら、**CloudFormationによる自動化**と**詳細な手順書**により、参加者全員が確実に完走できる設計になっています。

**事前準備の徹底自動化**により主催者の負担を軽減し、**実用的なアーキテクチャ**により参加者の満足度と学習効果を最大化する、完成度の高いハンズオン企画です。

**盛岡での素晴らしいハンズオンイベントの成功をお祈りしています！** 🌟

---

*2025年東北ITイベント AWS画像処理ハンズオン*  
*Complete Guide v1.0*